"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8908],{8908:(x,u,l)=>{l.d(u,{G:()=>G});var r=l(467),h=l(3632),e=l(6996),_=l(8974),d=l(7157),g=l(9884),p=l(177),m=l(9417),M=l(9664);function f(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",22),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Ameter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function k(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Ameter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function E(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",22),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Bmeter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_B")),e.R7$(2),e.Y8G("ngModel",t.Bmeter)}}function b(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Bmeter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_B")),e.R7$(2),e.Y8G("ngModel",t.Bmeter)}}function T(a,s){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-grid")(2,"ion-card-subtitle",17),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-row")(6,"ion-col")(7,"ion-item")(8,"ion-label",5),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"ion-input",18),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.formPoint=n)})("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.changeForm())}),e.k0s(),e.j41(12,"ion-icon",19),e.bIt("name",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.fpCheck)})("color",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.fpCl)}),e.k0s()()(),e.j41(13,"ion-col")(14,"ion-item")(15,"ion-label",5),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"ion-input",18),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.toPoint=n)})("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.changeTo())}),e.k0s(),e.j41(19,"ion-icon",19),e.bIt("name",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toCheck)})("color",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.toCl)}),e.k0s()()()(),e.j41(20,"ion-card-subtitle",20),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"ion-row")(24,"ion-col"),e.DNE(25,f,5,4,"ion-item",7),e.DNE(26,k,5,4,"ion-item",7),e.k0s(),e.j41(27,"ion-col"),e.DNE(28,E,5,4,"ion-item",7),e.DNE(29,b,5,4,"ion-item",7),e.k0s()(),e.j41(30,"ion-row")(31,"ion-col"),e.nrm(32,"img",21),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,10,"LB_MOVE2MARK")),e.R7$(6),e.JRh(e.bMT(10,12,"FROM")),e.R7$(2),e.Y8G("ngModel",t.formPoint),e.R7$(5),e.JRh(e.bMT(17,14,"TO")),e.R7$(2),e.Y8G("ngModel",t.toPoint),e.R7$(3),e.JRh(e.bMT(22,16,"OFFSET")),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(2),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios)}}function j(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",28),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Ameter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function R(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",5),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",29),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(3);return e.Njj(i.Ameter=n)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function C(a,s){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-grid")(2,"ion-card-subtitle",20),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-row")(6,"ion-col")(7,"ion-item")(8,"ion-input",23),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.formPoint=n)})("change",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.changeForm())}),e.k0s(),e.j41(9,"ion-icon",19),e.bIt("name",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.fpCheck)})("color",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.fpCl)}),e.k0s()()()(),e.j41(10,"ion-card-subtitle",20),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-row")(14,"ion-col")(15,"ion-item")(16,"ion-input",24),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.azimuth_d=n)}),e.k0s()()(),e.j41(17,"ion-col")(18,"ion-item")(19,"ion-input",25),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.azimuth_m=n)}),e.k0s()()(),e.j41(20,"ion-col")(21,"ion-item")(22,"ion-input",26),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.azimuth_s=n)}),e.k0s()()()(),e.j41(23,"ion-card-subtitle",20),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"ion-row")(27,"ion-col"),e.DNE(28,j,5,4,"ion-item",7),e.DNE(29,R,5,4,"ion-item",7),e.k0s()(),e.j41(30,"ion-row")(31,"ion-col"),e.nrm(32,"img",27),e.k0s()()()()}if(2&a){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,9,"LB_P1")),e.R7$(5),e.Y8G("ngModel",t.formPoint),e.R7$(3),e.JRh(e.bMT(12,11,"AZIMUTH")),e.R7$(5),e.Y8G("ngModel",t.azimuth_d),e.R7$(3),e.Y8G("ngModel",t.azimuth_m),e.R7$(3),e.Y8G("ngModel",t.azimuth_s),e.R7$(2),e.JRh(e.bMT(25,13,"OFFSET")),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios)}}function I(a,s){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-card-subtitle",12),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-row")(5,"ion-col")(6,"ion-item")(7,"ion-input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.mHeight=n)}),e.k0s()()()(),e.j41(8,"ion-item")(9,"ion-select",14),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.move_mode=n)}),e.nI1(10,"translate"),e.nI1(11,"translate"),e.nI1(12,"translate"),e.j41(13,"ion-select-option",15),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"ion-select-option",16),e.EFF(17),e.nI1(18,"translate"),e.k0s()()(),e.DNE(19,T,33,18,"section",7),e.DNE(20,C,33,15,"section",7),e.k0s()}if(2&a){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,10,"MSL")),e.R7$(5),e.Y8G("ngModel",t.mHeight),e.R7$(2),e.FS9("label",e.bMT(10,12,"MOVE_MODE")),e.FS9("okText",e.bMT(11,14,"OK")),e.FS9("cancelText",e.bMT(12,16,"CANCEL")),e.Y8G("ngModel",t.move_mode),e.R7$(5),e.JRh(e.bMT(15,18,"ST_2")),e.R7$(3),e.JRh(e.bMT(18,20,"ST_AZ")),e.R7$(2),e.Y8G("ngIf","2"==t.move_mode),e.R7$(1),e.Y8G("ngIf","3"==t.move_mode)}}function P(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-checkbox",30),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.use_pos_as_base=n)}),e.k0s(),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(1),e.Y8G("ngModel",t.use_pos_as_base),e.R7$(2),e.JRh(e.bMT(4,2,"USE_AS_BASE_POS"))}}function F(a,s){if(1&a){const t=e.RV6();e.j41(0,"ion-col")(1,"ion-item")(2,"ion-label",5),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-input",13),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.ant_height=n)}),e.k0s(),e.j41(6,"ion-button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.set_ant_height())}),e.EFF(7,"..."),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,2,"ANT_HEIGHT")),e.R7$(2),e.Y8G("ngModel",t.ant_height)}}let G=(()=>{class a{constructor(t,o,n,i){this.modalController=t,this.navParams=o,this.dataService=n,this.platform=i,this.stake_type=!1,this.move_mode="2",this.azimuth=0,this.connected=!1,this.use_pos_as_base=!1,this.ant_height=0,this.ant_measure_type="",this.ios=!1}ngOnInit(){this.ios=this.platform.is("ios"),this.mark=this.navParams.get("Mark"),this.markers=this.navParams.get("Markers");let t=this.mark.feature.properties;this.name=t.name,this.note=t.note,this.ant_measure_type=typeof t.height_type>"u"?"slant":t.height_type,this.mHeight=t.height_msl,this.stake_type=2==t.mark_type,this.connected=this.dataService.connected}changeForm(){if(this.resultA=this.markers.filter(t=>t.feature.properties.name==this.formPoint.toUpperCase()),this.fpCheck="checkmark-outline",this.fpCl="success",0==this.resultA.length)return console.log("No point"),this.fpCheck="close-outline",void(this.fpCl="danger")}changeTo(){if(this.resultB=this.markers.filter(t=>t.feature.properties.name==this.toPoint.toUpperCase()),this.toCheck="checkmark-outline",this.toCl="success",0==this.resultB.length)return this.toCheck="close-outline",void(this.toCl="danger")}cancel_modal(){var t=this;return(0,r.A)(function*(){yield t.modalController.dismiss()})()}confirm_modal(){var t=this;return(0,r.A)(function*(){let o={};if(o.name=t.name.toUpperCase(),t.mark.feature.properties.note=t.note,t.mark.feature.properties.height_msl=Number(t.mHeight),o.mode=t.move_mode,o.use_pos_as_base=t.use_pos_as_base,o.ant_height=t.ant_height,t.stake_type)if("2"===t.move_mode){if(typeof t.Ameter>"u")return o.mark=t.mark,void(yield t.modalController.dismiss("note_update",o));t.Bmeter=typeof t.Bmeter>"u"?0:t.Bmeter;let n=[];typeof t.resultA<"u"&&typeof t.resultB<"u"&&(n.push([t.resultA[0].feature.properties.longitude,t.resultA[0].feature.properties.latitude]),n.push([t.resultB[0].feature.properties.longitude,t.resultB[0].feature.properties.latitude])),o.points=n,o.a=Number(t.Ameter),o.b=Number(t.Bmeter)}else if("3"===t.move_mode){if(typeof t.Ameter>"u")return void(yield t.modalController.dismiss());let n=[];typeof t.resultA<"u"&&n.push([t.resultA[0].feature.properties.longitude,t.resultA[0].feature.properties.latitude]),o.points=n,typeof t.azimuth_d>"u"&&(t.azimuth_d=0),typeof t.azimuth_m>"u"&&(t.azimuth_m=0),typeof t.azimuth_s>"u"&&(t.azimuth_s=0),Math.abs(t.azimuth_s)>=60&&(t.azimuth_s=0,t.azimuth_m++),Math.abs(t.azimuth_m)>=60&&(t.azimuth_m=0,t.azimuth_d++),Math.abs(t.azimuth_d)>=360&&(t.azimuth_d=0),t.azimuth_d=Math.floor(t.azimuth_d),t.azimuth_m=Math.floor(t.azimuth_m),t.azimuth_s=Math.floor(t.azimuth_s),t.azimuth=t.dataService.ConvertDegreeDMSToDecimal(t.azimuth_d,t.azimuth_m,t.azimuth_s),o.azimuth=t.azimuth,o.a=Number(t.Ameter)}o.mark=t.mark,yield t.modalController.dismiss("update",o)})()}delete_modal(){var t=this;return(0,r.A)(function*(){let o={};o.mark=t.mark,yield t.modalController.dismiss("delete",o)})()}set_ant_height(){var t=this;return(0,r.A)(function*(){const o=yield t.modalController.create({component:h.U,cssClass:"modal-css-70",componentProps:{ant_height:t.ant_height,measure_type:t.ant_measure_type}});return o.onDidDismiss().then(n=>{if(null!==n){let i=n.role;if(typeof i>"u"||"cancel"===n.data||"backdrop"===i)return;t.ant_measure_type=n.data,t.ant_height=Number(i)}}),yield o.present()})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(_.W3),e.rXU(d.y8),e.rXU(g.f),e.rXU(d.OD))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-modal-edit-mark"]],decls:42,vars:23,consts:[["color","darkblue"],["slot","end",3,"click"],["slot","icon-only","name","close"],["position","floating"],["aria-label","","type","text",3,"ngModel","ngModelChange"],["position","stacked"],["aria-label","","placeholder","Type text","row","3",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"ion-no-border"],["expand","full","color","medium",3,"click"],["expand","full","color","danger",3,"click"],["expand","full","color","success",3,"click"],[1,"ps-3","mt-2"],["aria-label","","type","number","placeholder","0",3,"ngModel","ngModelChange"],["value","2",3,"label","ngModel","okText","cancelText","ngModelChange"],["value","2"],["value","3"],[1,"ps-2"],["aria-label","","type","text","placeholder","Point",3,"ngModel","ngModelChange","change"],["slot","end",1,"mv_check",3,"name","color"],[1,"ps-2","mt-2"],["src","assets/diagram_offset.svg","width","100%","height","140px"],["aria-label","","type","text","inputmode","numeric","placeholder","0",3,"ngModel","ngModelChange"],["type","text","placeholder","Point",3,"ngModel","ngModelChange","change"],["placeholder","DD\xb0","type","number",3,"ngModel","ngModelChange"],["placeholder","MM'","type","number",3,"ngModel","ngModelChange"],["placeholder",'SS"',"type","number",3,"ngModel","ngModelChange"],["src","assets/diagram_azimuth.svg","width","100%","height","140px"],["type","text","inputmode","numeric","placeholder","0",3,"ngModel","ngModelChange"],["type","number","placeholder","0",3,"ngModel","ngModelChange"],["aria-label","","checked","false","color","primary","slot","start",3,"ngModel","ngModelChange"],["id","ant_bttn","slot","end",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",1),e.bIt("click",function(){return n.cancel_modal()}),e.nrm(6,"ion-icon",2),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",3),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-input",4),e.bIt("ngModelChange",function(c){return n.name=c}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",5),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"ion-textarea",6),e.bIt("ngModelChange",function(c){return n.note=c}),e.k0s()()(),e.DNE(19,I,21,22,"section",7),e.DNE(20,P,5,4,"ion-item",7),e.j41(21,"ion-row"),e.DNE(22,F,8,4,"ion-col",7),e.k0s()(),e.j41(23,"ion-footer",8)(24,"ion-toolbar")(25,"ion-grid")(26,"ion-row")(27,"ion-col")(28,"div")(29,"ion-button",9),e.bIt("click",function(){return n.cancel_modal()}),e.EFF(30),e.nI1(31,"translate"),e.k0s()()(),e.j41(32,"ion-col")(33,"div")(34,"ion-button",10),e.bIt("click",function(){return n.delete_modal()}),e.EFF(35),e.nI1(36,"translate"),e.k0s()()(),e.j41(37,"ion-col")(38,"div")(39,"ion-button",11),e.bIt("click",function(){return n.confirm_modal()}),e.EFF(40),e.nI1(41,"translate"),e.k0s()()()()()()()),2&o&&(e.R7$(3),e.JRh(e.bMT(4,11,"EDIT_MARK")),e.R7$(8),e.JRh(e.bMT(12,13,"POINT_NAME")),e.R7$(2),e.Y8G("ngModel",n.name),e.R7$(3),e.JRh(e.bMT(17,15,"NOTES")),e.R7$(2),e.Y8G("ngModel",n.note),e.R7$(1),e.Y8G("ngIf",n.stake_type),e.R7$(1),e.Y8G("ngIf",n.connected),e.R7$(2),e.Y8G("ngIf",n.connected),e.R7$(8),e.JRh(e.bMT(31,17,"CANCEL")),e.R7$(5),e.JRh(e.bMT(36,19,"DELETE")),e.R7$(5),e.JRh(e.bMT(41,21,"CONFIRM")))},dependencies:[p.bT,m.BC,m.vS,_.Jm,_.QW,_.HW,_.eY,_.hU,_.W9,_.M0,_.lO,_.eU,_.iq,_.$w,_.uz,_.he,_.nf,_.ln,_.Nm,_.Ip,_.nc,_.BC,_.ai,_.hB,_.su,_.Je,_.Gw,M.D9],styles:[".mv_check[_ngcontent-%COMP%]{transform:translateY(22px)}"]})}}return a})()}}]);