"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9986],{9986:(p,m,l)=>{l.d(m,{_:()=>M});var _=l(467),e=l(6996),g=l(9884),i=l(8974),c=l(7157),h=l(177),d=l(9417),u=l(9664);function f(r,b){if(1&r){const t=e.RV6();e.j41(0,"section")(1,"ion-item")(2,"ion-label",5),e.EFF(3,"Translation X(m)"),e.k0s(),e.j41(4,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_dx=n)}),e.k0s()(),e.j41(5,"ion-item")(6,"ion-label",5),e.EFF(7,"Translation Y(m)"),e.k0s(),e.j41(8,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_dy=n)}),e.k0s()(),e.j41(9,"ion-item")(10,"ion-label",5),e.EFF(11,"Translation Z(m)"),e.k0s(),e.j41(12,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_dz=n)}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",5),e.EFF(15,"Rotation X(s)"),e.k0s(),e.j41(16,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_rx=n)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",5),e.EFF(19,"Rotation Y(s)"),e.k0s(),e.j41(20,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_ry=n)}),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label",5),e.EFF(23,"Rotation Z(s)"),e.k0s(),e.j41(24,"ion-input",21),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_rz=n)}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label",5),e.EFF(27,"Scale factor(ppm)"),e.k0s(),e.j41(28,"ion-input",20),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_scale=n)}),e.k0s()(),e.j41(29,"ion-item")(30,"ion-label",5),e.EFF(31,"Ellipsoid"),e.k0s(),e.j41(32,"ion-input",22),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_ellipsoid=n)}),e.k0s()(),e.j41(33,"ion-item")(34,"ion-label",5),e.EFF(35,"Semi-major Axis [a]"),e.k0s(),e.j41(36,"ion-input",23),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_major_axis=n)}),e.k0s()(),e.j41(37,"ion-item")(38,"ion-label",5),e.EFF(39,"Inverse flattening [1/f]"),e.k0s(),e.j41(40,"ion-input",24),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.transform_flattening=n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(4),e.Y8G("ngModel",t.transform_dx)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_dy)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_dz)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_rx)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_ry)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_rz)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_scale)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_ellipsoid),e.R7$(4),e.Y8G("ngModel",t.transform_major_axis)("disabled",t.disable_edit),e.R7$(4),e.Y8G("ngModel",t.transform_flattening)("disabled",t.disable_edit)}}let M=(()=>{class r{constructor(t,a,n){this.dataService=t,this.modalController=a,this.navParams=n,this.zone="47P",this.geoid_model=this.dataService.geoid_model,this.utm_format=this.dataService.utm_format_text,this.transform_dx=0,this.transform_dy=0,this.transform_dz=0,this.transform_rx=0,this.transform_ry=0,this.transform_rz=0,this.transform_scale=0,this.transform_ellipsoid="WGS84",this.transform_major_axis=0,this.transform_flattening=0,this.show_datum=!1,this.disable_edit=!0,this.use_dol_setting=!1,this.use_dol_setting_change=!1}ngOnInit(){this.mode=this.navParams.get("mode"),this.pj_name=this.navParams.get("pj_name"),this.note=this.navParams.get("note"),this.geoid_model=this.navParams.get("geoid_model"),""===this.geoid_model&&(this.geoid_model="tgm2017-1"),this.utm_format=this.navParams.get("utm_format"),this.zone=this.navParams.get("utm_zone"),this.transform_dx=this.navParams.get("transform_dx"),this.transform_dy=this.navParams.get("transform_dy"),this.transform_dz=this.navParams.get("transform_dz"),this.transform_rx=this.navParams.get("transform_rx"),this.transform_ry=this.navParams.get("transform_ry"),this.transform_rz=this.navParams.get("transform_rz"),this.transform_scale=this.navParams.get("transform_scale"),this.transform_ellipsoid=this.navParams.get("transform_ellipsoid"),this.transform_major_axis=this.navParams.get("transform_major_axis"),this.transform_flattening=this.navParams.get("transform_flattening"),"add"===this.mode&&(this.disable_edit=!1,this.use_dol_setting=this.dataService.config_local.use_dol_setting,this.updateDatumAndGeoid())}close_modal(){var t=this;return(0,_.A)(function*(){yield t.modalController.dismiss("close")})()}confirm_modal(){var t=this;return(0,_.A)(function*(){t.use_dol_setting_change&&t.dataService.updateDolSetting();let a={};a.project_name=t.pj_name.replace(/[\\//]/g,""),a.note=t.note,a.geoid_model=t.geoid_model,a.datum=t.utm_format,a.utm_zone=t.zone,a.dx=t.transform_dx,a.dy=t.transform_dy,a.dz=t.transform_dz,a.rx=t.transform_rx,a.ry=t.transform_ry,a.rz=t.transform_rz,a.scale=t.transform_scale,a.ellipsoid=t.transform_ellipsoid,a.a=t.transform_major_axis,a.inv_f=t.transform_flattening,t.dataService.geoid_model=t.geoid_model,t.dataService.utm_format_text=t.utm_format,"add"==t.mode&&t.dataService.updateDefaultGeoidAndDatum(),yield t.modalController.dismiss("update",a)})()}showDatum(){this.show_datum=!this.show_datum}datumChange(t){this.datumUpdate()}datumUpdate(){let t=this.dataService.findProjection(this.utm_format);if(0==t.length)return;let a=t[0][1];this.transform_scale=a.scale,this.transform_ellipsoid=a.ellipsoid,this.transform_major_axis=a.a,this.transform_flattening=a.inv_f,this.transform_dx=a.dx,this.transform_dy=a.dy,this.transform_dz=a.dz,this.transform_rx=a.rx,this.transform_ry=a.ry,this.transform_rz=a.rz}dolSettingChange(){this.use_dol_setting_change=!0,this.dataService.use_dol_setting=this.use_dol_setting,this.updateDatumAndGeoid()}updateDatumAndGeoid(){this.use_dol_setting&&(this.geoid_model="egm96-5",this.utm_format="INDIAN1975_DOL2552"),this.datumUpdate()}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(g.f),e.rXU(i.W3),e.rXU(c.y8))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-modal-edit-project"]],decls:67,vars:56,consts:[["color","darkblue"],["slot","end",3,"click"],["slot","icon-only","name","close"],["position","floating"],["aria-label","","id","pj_name","type","text",3,"ngModel","ngModelChange"],["position","stacked"],["aria-label","","row","3",3,"placeholder","ngModel","ngModelChange"],["aria-label","","type","text","placeholder","47",3,"ngModel","disabled","ngModelChange"],["aria-label","","color","primary","slot","end",3,"ngModel","disabled","ngModelChange","ionChange"],[3,"label","ngModel","okText","cancelText","disabled","ngModelChange"],["value","egm96-5"],["value","tgm2017-1"],["id","utm_format",3,"label","ngModel","okText","cancelText","disabled","ngModelChange","ionChange"],["value","WGS84"],["value","INDIAN1975_DOL2552"],[3,"click"],[4,"ngIf"],[1,"ion-no-border"],["expand","full","color","medium",3,"click"],["expand","full","color","success",3,"click"],["aria-label","","placeholder","0","type","number",3,"ngModel","disabled","ngModelChange"],["placeholder","0","type","number",3,"ngModel","disabled","ngModelChange"],["aria-label","","type","text","disabled","",3,"ngModel","ngModelChange"],["aria-label","","placeholder","6378137","type","number",3,"ngModel","disabled","ngModelChange"],["aria-label","","placeholder","298.2572235630","type","number",3,"ngModel","disabled","ngModelChange"]],template:function(a,n){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",1),e.bIt("click",function(){return n.close_modal()}),e.nrm(6,"ion-icon",2),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",3),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-input",4),e.bIt("ngModelChange",function(s){return n.pj_name=s}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",5),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"ion-textarea",6),e.bIt("ngModelChange",function(s){return n.note=s}),e.nI1(19,"translate"),e.k0s()(),e.j41(20,"ion-item")(21,"ion-label",3),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"ion-input",7),e.bIt("ngModelChange",function(s){return n.zone=s}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label"),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.j41(29,"ion-toggle",8),e.bIt("ngModelChange",function(s){return n.use_dol_setting=s})("ionChange",function(){return n.dolSettingChange()}),e.k0s()(),e.j41(30,"ion-item")(31,"ion-select",9),e.bIt("ngModelChange",function(s){return n.geoid_model=s}),e.nI1(32,"translate"),e.nI1(33,"translate"),e.nI1(34,"translate"),e.j41(35,"ion-select-option",10),e.EFF(36,"EGM96"),e.k0s(),e.j41(37,"ion-select-option",11),e.EFF(38,"TGM2017"),e.k0s()()(),e.j41(39,"ion-item")(40,"ion-select",12),e.bIt("ngModelChange",function(s){return n.utm_format=s})("ionChange",function(s){return n.datumChange(s)}),e.nI1(41,"translate"),e.nI1(42,"translate"),e.nI1(43,"translate"),e.j41(44,"ion-select-option",13),e.EFF(45,"WGS84"),e.k0s(),e.j41(46,"ion-select-option",14),e.EFF(47,"DOL2552-IND1975"),e.k0s()()(),e.j41(48,"ion-item")(49,"ion-label",15),e.bIt("click",function(){return n.showDatum()}),e.EFF(50),e.nI1(51,"translate"),e.k0s()(),e.DNE(52,f,41,19,"section",16),e.k0s()(),e.j41(53,"ion-footer",17)(54,"ion-toolbar")(55,"ion-grid")(56,"ion-row")(57,"ion-col")(58,"div")(59,"ion-button",18),e.bIt("click",function(){return n.close_modal()}),e.EFF(60),e.nI1(61,"translate"),e.k0s()()(),e.j41(62,"ion-col")(63,"div")(64,"ion-button",19),e.bIt("click",function(){return n.confirm_modal()}),e.EFF(65),e.nI1(66,"translate"),e.k0s()()()()()()()),2&a&&(e.R7$(3),e.JRh(e.bMT(4,26,"EDIT_PROJECT")),e.R7$(8),e.JRh(e.bMT(12,28,"PROJECT_NAME")),e.R7$(2),e.Y8G("ngModel",n.pj_name),e.R7$(3),e.JRh(e.bMT(17,30,"NOTES")),e.R7$(2),e.FS9("placeholder",e.bMT(19,32,"PROJECT_DESC")),e.Y8G("ngModel",n.note),e.R7$(4),e.JRh(e.bMT(23,34,"ZONE")),e.R7$(2),e.Y8G("ngModel",n.zone)("disabled",n.disable_edit),e.R7$(3),e.JRh(e.bMT(28,36,"LB_USE_DOL")),e.R7$(2),e.Y8G("ngModel",n.use_dol_setting)("disabled",n.disable_edit),e.R7$(2),e.FS9("label",e.bMT(32,38,"GEOID_MODEL")),e.FS9("okText",e.bMT(33,40,"OK")),e.FS9("cancelText",e.bMT(34,42,"CANCEL")),e.Y8G("ngModel",n.geoid_model)("disabled",n.disable_edit),e.R7$(9),e.FS9("label",e.bMT(41,44,"LB_DATUM")),e.FS9("okText",e.bMT(42,46,"OK")),e.FS9("cancelText",e.bMT(43,48,"CANCEL")),e.Y8G("ngModel",n.utm_format)("disabled",n.disable_edit),e.R7$(10),e.SpI(" ",e.bMT(51,50,"LB_DATUM_PARAM")," "),e.R7$(2),e.Y8G("ngIf",n.show_datum),e.R7$(8),e.JRh(e.bMT(61,52,"CANCEL")),e.R7$(5),e.JRh(e.bMT(66,54,"CONFIRM")))},dependencies:[h.bT,d.BC,d.vS,i.Jm,i.QW,i.hU,i.W9,i.M0,i.lO,i.eU,i.iq,i.$w,i.uz,i.he,i.nf,i.ln,i.Nm,i.Ip,i.nc,i.BC,i.BY,i.ai,i.hB,i.su,i.Je,i.Gw,u.D9]})}}return r})()}}]);