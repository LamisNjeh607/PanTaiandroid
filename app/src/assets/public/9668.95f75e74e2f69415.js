"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9668],{3632:($,G,u)=>{u.d(G,{U:()=>N});var f=u(467),P=u(7328),n=u(6996),g=u(8974),e=u(7157),c=u(9884),k=u(177),E=u(9417),F=u(9664);function D(p,S){if(1&p&&(n.j41(0,"ion-select-option",15),n.EFF(1),n.k0s()),2&p){const l=S.$implicit;n.FS9("value",l.value),n.R7$(1),n.JRh(l.name)}}function C(p,S){if(1&p){const l=n.RV6();n.j41(0,"section")(1,"ion-item")(2,"ion-label",8),n.EFF(3,"Antenna Radious (m)"),n.k0s(),n.j41(4,"ion-input",9),n.bIt("ngModelChange",function(s){n.eBV(l);const m=n.XpG();return n.Njj(m.ant_radius=s)}),n.k0s()(),n.j41(5,"ion-item")(6,"ion-label",8),n.EFF(7,"Antenna L1 Height (m)"),n.k0s(),n.j41(8,"ion-input",9),n.bIt("ngModelChange",function(s){n.eBV(l);const m=n.XpG();return n.Njj(m.ant_l1_height=s)}),n.k0s()(),n.j41(9,"ion-item")(10,"ion-label",8),n.EFF(11,"Antenna L2 Height (m)"),n.k0s(),n.j41(12,"ion-input",9),n.bIt("ngModelChange",function(s){n.eBV(l);const m=n.XpG();return n.Njj(m.ant_l2_height=s)}),n.k0s()(),n.j41(13,"ion-item")(14,"ion-label",8),n.EFF(15,"Antenna ARP (m)"),n.k0s(),n.j41(16,"ion-input",9),n.bIt("ngModelChange",function(s){n.eBV(l);const m=n.XpG();return n.Njj(m.ant_arp_height=s)}),n.k0s()()()}if(2&p){const l=n.XpG();n.R7$(4),n.Y8G("ngModel",l.ant_radius),n.R7$(4),n.Y8G("ngModel",l.ant_l1_height),n.R7$(4),n.Y8G("ngModel",l.ant_l2_height),n.R7$(4),n.Y8G("ngModel",l.ant_arp_height)}}let N=(()=>{class p{constructor(l,h,s){this.modalController=l,this.navParams=h,this.dataService=s,this.use_slant_height=!1,this.ant_user_height=0,this.ant_radius=.073,this.ant_l1_height=.05,this.ant_l2_height=.05,this.ant_arp_height=.04,this.ant_calculated_height=0,this.ant_measure_type="pole",this.ant_measure_type_list=[{name:"Pole Height",value:"pole"},{name:"Phase Center",value:"phase center"},{name:"Slant Height",value:"slant"}],this.ant_type=[{name:"GN-GG0710",value:{radious:.07575,l1:.048,l2:.044,arp:.036}},{name:"GPS500",value:{radious:.076,l1:.054,l2:.0478,arp:.03}},{name:"PRB2",value:{radious:.0675,l1:.087,l2:.0824,arp:.078}},{name:"PRB3",value:{radious:.0675,l1:.087,l2:.0824,arp:.078}}],this.show_detail=!1}ngOnInit(){this.ant_user_height=this.navParams.get("ant_height"),this.ant_measure_type=this.navParams.get("measure_type"),"variscite"===this.dataService.info.platform?this.ant_model=typeof this.dataService.info.ant_model>"u"?"GN-GG0710":this.dataService.info.ant_model:this.dataService.isPRB2?this.ant_model=typeof this.dataService.info.ant_model>"u"?"PRB2":this.dataService.info.ant_model:this.dataService.isPRB3&&(this.ant_model=typeof this.dataService.info.ant_model>"u"?"PRB3":this.dataService.info.ant_model);let l=this.getAntInfo(this.ant_model);this.ant_radius=l.value.radious,this.ant_l1_height=l.value.l1,this.ant_l2_height=l.value.l2,this.ant_arp_height=l.value.arp}confirm_modal(){var l=this;return(0,f.A)(function*(){let h=(l.ant_l1_height+l.ant_l2_height)/2,s=h-l.ant_arp_height;switch(console.log("height_edge_phase_center",s),l.ant_measure_type){case"pole":l.ant_calculated_height=l.ant_user_height+h;break;case"phase center":l.ant_calculated_height=l.ant_user_height+s;break;case"slant":l.ant_calculated_height=Math.sqrt(l.ant_user_height**2-l.ant_radius**2)+s}l.ant_calculated_height=P.LIG(l.ant_calculated_height,4),console.log("Calculated Antenna Height",l.ant_calculated_height),yield l.modalController.dismiss(l.ant_measure_type,`${l.ant_calculated_height}`)})()}cancel_modal(){var l=this;return(0,f.A)(function*(){yield l.modalController.dismiss("cancel")})()}getAntInfo(l){return this.ant_type.find(s=>s.name==l)}showDetail(){this.show_detail=!this.show_detail}static{this.\u0275fac=function(h){return new(h||p)(n.rXU(g.W3),n.rXU(e.y8),n.rXU(c.f))}}static{this.\u0275cmp=n.VBU({type:p,selectors:[["app-modal-antenna"]],decls:35,vars:22,consts:[[1,"custom-header"],["color","darkblue",1,"ion-align-items-center","custom-toolbar"],["slot","end",1,"center-vertical",3,"click"],["slot","icon-only","name","close"],[3,"fullscreen"],[1,"mt-3"],["label","Antenna Measure Type",3,"ngModel","okText","cancelText","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["position","floating"],["aria-label","","type","number",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf"],[3,"translucent"],["expand","full","color","medium",3,"click"],["expand","full","color","success",3,"click"],[3,"value"]],template:function(h,s){1&h&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),n.EFF(3,"Antenna Height"),n.k0s(),n.j41(4,"ion-buttons",2),n.bIt("click",function(){return s.cancel_modal()}),n.nrm(5,"ion-icon",3),n.k0s()()(),n.j41(6,"ion-content",4)(7,"ion-list")(8,"ion-item",5)(9,"ion-select",6),n.bIt("ngModelChange",function(b){return s.ant_measure_type=b}),n.nI1(10,"translate"),n.nI1(11,"translate"),n.DNE(12,D,2,2,"ion-select-option",7),n.k0s()(),n.j41(13,"ion-item")(14,"ion-label",8),n.EFF(15),n.nI1(16,"translate"),n.k0s(),n.j41(17,"ion-input",9),n.bIt("ngModelChange",function(b){return s.ant_user_height=b}),n.k0s()(),n.j41(18,"ion-item")(19,"ion-label",10),n.bIt("click",function(){return s.showDetail()}),n.EFF(20),n.k0s()(),n.DNE(21,C,17,4,"section",11),n.k0s()(),n.j41(22,"ion-footer",12)(23,"ion-grid")(24,"ion-row")(25,"ion-col")(26,"div")(27,"ion-button",13),n.bIt("click",function(){return s.cancel_modal()}),n.EFF(28),n.nI1(29,"translate"),n.k0s()()(),n.j41(30,"ion-col")(31,"div")(32,"ion-button",14),n.bIt("click",function(){return s.confirm_modal()}),n.EFF(33),n.nI1(34,"translate"),n.k0s()()()()()()),2&h&&(n.R7$(6),n.Y8G("fullscreen",!0),n.R7$(3),n.FS9("okText",n.bMT(10,12,"OK")),n.FS9("cancelText",n.bMT(11,14,"CANCEL")),n.Y8G("ngModel",s.ant_measure_type),n.R7$(3),n.Y8G("ngForOf",s.ant_measure_type_list),n.R7$(3),n.SpI("",n.bMT(16,16,"ANT_HEIGHT")," (m)"),n.R7$(2),n.Y8G("ngModel",s.ant_user_height),n.R7$(3),n.SpI(" Antenna Model ",s.ant_model," "),n.R7$(1),n.Y8G("ngIf",s.show_detail),n.R7$(1),n.Y8G("translucent",!0),n.R7$(6),n.JRh(n.bMT(29,18,"CANCEL")),n.R7$(5),n.JRh(n.bMT(34,20,"CONFIRM")))},dependencies:[k.Sq,k.bT,E.BC,E.vS,g.Jm,g.QW,g.hU,g.W9,g.M0,g.lO,g.eU,g.iq,g.$w,g.uz,g.he,g.nf,g.ln,g.Nm,g.Ip,g.BC,g.ai,g.su,g.Je,F.D9],styles:['@charset "UTF-8";.custom-header[_ngcontent-%COMP%]{position:relative;max-height:52px;height:52px}.custom-toolbar[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:100%;display:flex;align-items:center;justify-content:space-between}']})}}return p})()},9668:($,G,u)=>{u.d(G,{D:()=>te});var f=u(467),P=u(3632),n=u(7328),g=u(1008),e=u(6996),c=u(8974),k=u(7157),E=u(252),F=u(9884),D=u(177),C=u(9417),N=u(9664);function p(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",20),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.latitude=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.SpI("",e.bMT(3,2,"LATITUDE")," [-DD.DDDDD]"),e.R7$(2),e.Y8G("ngModel",t.latitude)}}function S(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",11),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.latitude=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.SpI("",e.bMT(3,2,"LATITUDE")," [-DD.DDDDD]"),e.R7$(2),e.Y8G("ngModel",t.latitude)}}function l(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",20),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.longitude=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.SpI("",e.bMT(3,2,"LONGITUDE")," [-DD.DDDDD]"),e.R7$(2),e.Y8G("ngModel",t.longitude)}}function h(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",11),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.longitude=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.SpI("",e.bMT(3,2,"LONGITUDE")," [-DD.DDDDD]"),e.R7$(2),e.Y8G("ngModel",t.longitude)}}function s(a,d){if(1&a&&(e.j41(0,"section"),e.DNE(1,p,5,4,"ion-item",9),e.DNE(2,S,5,4,"ion-item",9),e.DNE(3,l,5,4,"ion-item",9),e.DNE(4,h,5,4,"ion-item",9),e.k0s()),2&a){const t=e.XpG(3);e.R7$(1),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(1),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios)}}function m(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",25),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.latitude_d=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.JRh(e.bMT(3,2,"DEGREES")),e.R7$(2),e.Y8G("ngModel",t.latitude_d)}}function b(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",26),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.latitude_d=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.JRh(e.bMT(3,2,"DEGREES")),e.R7$(2),e.Y8G("ngModel",t.latitude_d)}}function x(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",25),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.longitude_d=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.JRh(e.bMT(3,2,"DEGREES")),e.R7$(2),e.Y8G("ngModel",t.longitude_d)}}function v(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",26),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(4);return e.Njj(o.longitude_d=i)}),e.k0s()()}if(2&a){const t=e.XpG(4);e.R7$(2),e.JRh(e.bMT(3,2,"DEGREES")),e.R7$(2),e.Y8G("ngModel",t.longitude_d)}}function A(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-grid")(1,"ion-row",21)(2,"ion-col")(3,"ion-label",22),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.j41(6,"ion-row")(7,"ion-col"),e.DNE(8,m,5,4,"ion-item",9),e.DNE(9,b,5,4,"ion-item",9),e.k0s(),e.j41(10,"ion-col")(11,"ion-item")(12,"ion-label",10),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"ion-input",23),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.latitude_m=i)}),e.k0s()()(),e.j41(16,"ion-col")(17,"ion-item")(18,"ion-label",10),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.j41(21,"ion-input",24),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.latitude_s=i)}),e.k0s()()()(),e.j41(22,"ion-row",21)(23,"ion-col")(24,"ion-label",22),e.EFF(25),e.nI1(26,"translate"),e.k0s()()(),e.j41(27,"ion-row")(28,"ion-col"),e.DNE(29,x,5,4,"ion-item",9),e.DNE(30,v,5,4,"ion-item",9),e.k0s(),e.j41(31,"ion-col")(32,"ion-item")(33,"ion-label",10),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"ion-input",23),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.longitude_m=i)}),e.k0s()()(),e.j41(37,"ion-col")(38,"ion-item")(39,"ion-label",10),e.EFF(40),e.nI1(41,"translate"),e.k0s(),e.j41(42,"ion-input",24),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.longitude_s=i)}),e.k0s()()()()()}if(2&a){const t=e.XpG(3);e.R7$(4),e.SpI("",e.bMT(5,14,"LATITUDE")," [-DD MM SS.SSSS]"),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(4),e.JRh(e.bMT(14,16,"MINUTES")),e.R7$(2),e.Y8G("ngModel",t.latitude_m),e.R7$(4),e.JRh(e.bMT(20,18,"SECONDS")),e.R7$(2),e.Y8G("ngModel",t.latitude_s),e.R7$(4),e.SpI("",e.bMT(26,20,"LONGITUDE")," [-DD MM SS.SSSS]"),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(4),e.JRh(e.bMT(35,22,"MINUTES")),e.R7$(2),e.Y8G("ngModel",t.longitude_m),e.R7$(4),e.JRh(e.bMT(41,24,"SECONDS")),e.R7$(2),e.Y8G("ngModel",t.longitude_s)}}function B(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-list")(1,"ion-item")(2,"ion-select",19),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.model_latlong_format=i)}),e.nI1(3,"translate"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.j41(6,"ion-select-option",6),e.EFF(7,"DD.DDDD"),e.k0s(),e.j41(8,"ion-select-option",7),e.EFF(9,"DD\xb0MM'SS.SSSS\""),e.k0s()()(),e.DNE(10,s,5,4,"section",9),e.DNE(11,A,43,26,"ion-grid",9),e.k0s()}if(2&a){const t=e.XpG(2);e.R7$(2),e.FS9("label",e.bMT(3,6,"LATLNG_FORMAT")),e.FS9("okText",e.bMT(4,8,"OK")),e.FS9("cancelText",e.bMT(5,10,"CANCEL")),e.Y8G("ngModel",t.model_latlong_format),e.R7$(8),e.Y8G("ngIf","1"==t.model_latlong_format),e.R7$(1),e.Y8G("ngIf","2"==t.model_latlong_format)}}function O(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",20),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.utm_north=i)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"NORTH")),e.R7$(2),e.Y8G("ngModel",t.utm_north)}}function Y(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",11),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.utm_north=i)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"NORTH")),e.R7$(2),e.Y8G("ngModel",t.utm_north)}}function X(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",20),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.utm_east=i)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"EAST")),e.R7$(2),e.Y8G("ngModel",t.utm_east)}}function y(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",11),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(3);return e.Njj(o.utm_east=i)}),e.k0s()()}if(2&a){const t=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"EAST")),e.R7$(2),e.Y8G("ngModel",t.utm_east)}}function V(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-list"),e.DNE(1,O,5,4,"ion-item",9),e.DNE(2,Y,5,4,"ion-item",9),e.DNE(3,X,5,4,"ion-item",9),e.DNE(4,y,5,4,"ion-item",9),e.j41(5,"ion-item")(6,"ion-label",3),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"ion-input",27),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.utm_zone=i)}),e.k0s()()()}if(2&a){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(1),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(3),e.JRh(e.bMT(8,6,"ZONE")),e.R7$(2),e.Y8G("ngModel",t.utm_zone)}}function z(a,d){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-item")(2,"ion-select",16),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.model_stakes=i)})("ionChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.stakesChange())}),e.nI1(3,"translate"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.j41(6,"ion-select-option",17),e.EFF(7,"UTM"),e.k0s(),e.j41(8,"ion-select-option",18),e.EFF(9,"LLH"),e.k0s()()(),e.DNE(10,B,12,12,"ion-list",9),e.DNE(11,V,10,8,"ion-list",9),e.k0s()}if(2&a){const t=e.XpG();e.R7$(2),e.FS9("label",e.bMT(3,6,"FORMAT_POS")),e.FS9("okText",e.bMT(4,8,"OK")),e.FS9("cancelText",e.bMT(5,10,"CANCEL")),e.Y8G("ngModel",t.model_stakes),e.R7$(8),e.Y8G("ngIf","llh"==t.model_stakes),e.R7$(1),e.Y8G("ngIf","utm"==t.model_stakes)}}function U(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",33),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Ameter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function J(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",34),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Ameter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function W(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",33),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Bmeter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_B")),e.R7$(2),e.Y8G("ngModel",t.Bmeter)}}function K(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",34),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Bmeter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_B")),e.R7$(2),e.Y8G("ngModel",t.Bmeter)}}function w(a,d){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-grid")(2,"ion-card-subtitle",28),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-row")(6,"ion-col")(7,"ion-item")(8,"ion-label",10),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"ion-input",29),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.formPoint=i)})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeForm())}),e.k0s(),e.nrm(12,"ion-icon",30),e.k0s()(),e.j41(13,"ion-col")(14,"ion-item")(15,"ion-label",10),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"ion-input",29),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.toPoint=i)})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeTo())}),e.k0s(),e.nrm(19,"ion-icon",30),e.k0s()()(),e.j41(20,"ion-card-subtitle",31),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"ion-row")(24,"ion-col"),e.DNE(25,U,5,4,"ion-item",9),e.DNE(26,J,5,4,"ion-item",9),e.k0s(),e.j41(27,"ion-col"),e.DNE(28,W,5,4,"ion-item",9),e.DNE(29,K,5,4,"ion-item",9),e.k0s()(),e.j41(30,"ion-row")(31,"ion-col"),e.nrm(32,"img",32),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,14,"LB_MARK2")),e.R7$(6),e.JRh(e.bMT(10,16,"FROM")),e.R7$(2),e.Y8G("ngModel",t.formPoint),e.R7$(1),e.Y8G("name",t.fpCheck)("color",t.fpCl),e.R7$(4),e.JRh(e.bMT(17,18,"TO")),e.R7$(2),e.Y8G("ngModel",t.toPoint),e.R7$(1),e.Y8G("name",t.toCheck)("color",t.toCl),e.R7$(2),e.SpI("",e.bMT(22,20,"OFFSET")," (m)"),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios),e.R7$(2),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios)}}function H(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",33),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Ameter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function Z(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label",10),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-input",34),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.Ameter=i)}),e.k0s()()}if(2&a){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"OFFSET_A")),e.R7$(2),e.Y8G("ngModel",t.Ameter)}}function Q(a,d){if(1&a){const t=e.RV6();e.j41(0,"section")(1,"ion-grid")(2,"ion-card-subtitle",31),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-row")(6,"ion-col")(7,"ion-item")(8,"ion-input",29),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.formPoint=i)})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.changeForm())}),e.k0s(),e.nrm(9,"ion-icon",30),e.k0s()()(),e.j41(10,"ion-card-subtitle",31),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-row")(14,"ion-col")(15,"ion-item")(16,"ion-input",35),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.azimuth_d=i)}),e.k0s()()(),e.j41(17,"ion-col")(18,"ion-item")(19,"ion-input",36),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.azimuth_m=i)}),e.k0s()()(),e.j41(20,"ion-col")(21,"ion-item")(22,"ion-input",37),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.azimuth_s=i)}),e.k0s()()()(),e.j41(23,"ion-card-subtitle",31),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"ion-row")(27,"ion-col"),e.DNE(28,H,5,4,"ion-item",9),e.DNE(29,Z,5,4,"ion-item",9),e.k0s()(),e.j41(30,"ion-row")(31,"ion-col"),e.nrm(32,"img",38),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,11,"LB_P1")),e.R7$(5),e.Y8G("ngModel",t.formPoint),e.R7$(1),e.Y8G("name",t.fpCheck)("color",t.fpCl),e.R7$(2),e.JRh(e.bMT(12,13,"AZIMUTH")),e.R7$(5),e.Y8G("ngModel",t.azimuth_d),e.R7$(3),e.Y8G("ngModel",t.azimuth_m),e.R7$(3),e.Y8G("ngModel",t.azimuth_s),e.R7$(2),e.JRh(e.bMT(25,15,"OFFSET")),e.R7$(4),e.Y8G("ngIf",0==t.ios),e.R7$(1),e.Y8G("ngIf",1==t.ios)}}function q(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-checkbox",39),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.use_pos_as_base=i)}),e.k0s(),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(1),e.Y8G("ngModel",t.use_pos_as_base),e.R7$(2),e.JRh(e.bMT(4,2,"USE_AS_BASE_POS"))}}function ee(a,d){if(1&a){const t=e.RV6();e.j41(0,"ion-col")(1,"ion-item")(2,"ion-label",10),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-input",34),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.ant_height=i)}),e.k0s(),e.j41(6,"ion-button",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.set_ant_height())}),e.EFF(7,"..."),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,2,"ANT_HEIGHT")),e.R7$(2),e.Y8G("ngModel",t.ant_height)}}let te=(()=>{class a{constructor(t,_,i,o,r){this.modalController=t,this.navParams=_,this.file=i,this.dataService=o,this.platform=r,this.model_stakes="utm",this.latitude=0,this.longitude=0,this.height=0,this.ant_measure_type="slant",this.utm_north=0,this.utm_east=0,this.utm_zone="",this.model_latlong_format="1",this.latitude_d=0,this.latitude_m=0,this.latitude_s=0,this.longitude_d=0,this.longitude_m=0,this.longitude_s=0,this.note="",this.stake_mode="1",this.azimuth=0,this.connected=!1,this.use_pos_as_base=!1,this.ant_height=0,this.ios=!1}ngOnInit(){this.ios=this.platform.is("ios"),this.p_name=this.navParams.get("Name"),this.note="",this.latitude=this.navParams.get("Latitude"),this.longitude=this.navParams.get("Longitude"),this.height=this.navParams.get("Height"),this.markers=this.navParams.get("Markers");let t=g.b(this.latitude,this.longitude);this.utm_zone=t.zoneNum+t.zoneLetter;let _=this.dataService.convertWGS84toUTM(Number(this.latitude),Number(this.longitude),this.utm_zone);this.utm_east=Math.floor(_[0]),this.utm_north=Math.floor(_[1]),this.height=Math.floor(this.height);let i=this.dataService.ConvertLatitudeToDMS(Number(this.latitude)),o=this.dataService.ConvertLongitudeToDMS(Number(this.longitude));this.latitude_d="N"==i.sign?i.degrees:-1*i.degrees,this.latitude_m=i.minutes,this.latitude_s=i.seconds,this.longitude_d="E"==o.sign?o.degrees:-1*o.degrees,this.longitude_m=o.minutes,this.longitude_s=o.seconds,this.connected=this.dataService.connected}stakesChange(){}changeForm(){if(this.resultA=this.markers.filter(t=>t.feature.properties.name==this.formPoint.toUpperCase()),this.fpCheck="checkmark-outline",this.fpCl="success",0==this.resultA.length)return console.log("No point"),this.fpCheck="close-outline",void(this.fpCl="danger")}changeTo(){if(this.resultB=this.markers.filter(t=>t.feature.properties.name==this.toPoint.toUpperCase()),this.toCheck="checkmark-outline",this.toCl="success",0==this.resultB.length)return console.log("No point"),this.toCheck="close-outline",void(this.toCl="danger")}cancel_modal(){var t=this;return(0,f.A)(function*(){yield t.modalController.dismiss()})()}confirm_modal(){var t=this;return(0,f.A)(function*(){if("1"===t.stake_mode){if("llh"===t.model_stakes){"2"===t.model_latlong_format&&(t.latitude=t.dataService.ConvertDMSToLatLongDecimal(Number(t.latitude_d),Number(t.latitude_m),Number(t.latitude_s)),t.longitude=t.dataService.ConvertDMSToLatLongDecimal(Number(t.longitude_d),Number(t.longitude_m),Number(t.longitude_s)));let r=g.b(t.latitude,t.longitude);t.utm_zone=r.zoneNum+r.zoneLetter;let M=t.dataService.convertWGS84toUTM(Number(t.latitude),Number(t.longitude),t.utm_zone);t.utm_east=M[0],t.utm_north=M[1]}else{let r=t.dataService.convertUTMtoLatLong(Number(t.utm_north),Number(t.utm_east),t.utm_zone);t.latitude=r[1],t.longitude=r[0]}if(t.dataService.connected)if(t.dataService.wifi_connected){let r=yield t.dataService.getGeoidHeight(t.latitude,t.longitude);typeof r<"u"&&(t.ellipsoid_height=t.height+r.geoid,t.geoid_height=r.geoid)}else if(t.dataService.blue_conneted){let r=t.dataService.geoid;t.ellipsoid_height=t.height+Number(r),t.geoid_height=Number(r)}}else if("2"===t.stake_mode){let r=[];if(typeof t.resultA>"u"||typeof t.resultB>"u")return void(yield t.modalController.dismiss());if(r.push([t.resultA[0].feature.properties.longitude,t.resultA[0].feature.properties.latitude]),r.push([t.resultB[0].feature.properties.longitude,t.resultB[0].feature.properties.latitude]),2===r.length){if(typeof t.Ameter>"u")return void(yield t.modalController.dismiss());t.Bmeter=typeof t.Bmeter>"u"?0:t.Bmeter;let M=[];r.forEach(j=>{M.push([j[1],j[0]])});let I=t.dataService.pointBetween(M,t.Ameter,t.Bmeter),T=new L.LatLng(n.LIG(I[1],8),n.LIG(I[0],8));t.latitude=T.lat,t.longitude=T.lng;let R=t.dataService.convertWGS84toUTM(t.latitude,t.longitude,t.utm_zone);t.utm_east=R[0],t.utm_north=R[1]}}else if("3"===t.stake_mode){if(typeof t.resultA>"u"||typeof t.Ameter>"u")return void(yield t.modalController.dismiss());typeof t.azimuth_d>"u"&&(t.azimuth_d=0),typeof t.azimuth_m>"u"&&(t.azimuth_m=0),typeof t.azimuth_s>"u"&&(t.azimuth_s=0),Math.abs(t.azimuth_s)>=60&&(t.azimuth_s=0,t.azimuth_m++),Math.abs(t.azimuth_m)>=60&&(t.azimuth_m=0,t.azimuth_d++),Math.abs(t.azimuth_d)>=360&&(t.azimuth_d=0),t.azimuth_d=Math.floor(t.azimuth_d),t.azimuth_m=Math.floor(t.azimuth_m),t.azimuth_s=Math.floor(t.azimuth_s),t.azimuth=t.dataService.ConvertDegreeDMSToDecimal(t.azimuth_d,t.azimuth_m,t.azimuth_s);let T=t.dataService.pointAzimuth([[t.resultA[0].feature.properties.latitude,t.resultA[0].feature.properties.longitude]],t.azimuth,Number(t.Ameter));t.latitude=n.LIG(T[1],8),t.longitude=n.LIG(T[0],8);let R=g.b(t.latitude,t.longitude);t.utm_zone=R.zoneNum+R.zoneLetter;let j=t.dataService.convertWGS84toUTM(t.latitude,t.longitude,t.utm_zone);t.utm_east=j[0],t.utm_north=j[1]}let i=[];i.push(Number(t.latitude)),i.push(Number(t.longitude)),i.push(Number(t.height)),i.push(Number(t.utm_east)),i.push(Number(t.utm_north)),i.push(t.utm_zone),i.push(t.note),i.push(t.p_name.toUpperCase()),i.push(t.ellipsoid_height),i.push(t.geoid_height),i.push(t.use_pos_as_base),i.push(Number(t.ant_height)),yield t.modalController.dismiss("llh",i)})()}set_ant_height(){var t=this;return(0,f.A)(function*(){const _=yield t.modalController.create({component:P.U,cssClass:"modal-css-70",componentProps:{ant_height:t.ant_height,measure_type:t.ant_measure_type}});return _.onDidDismiss().then(i=>{if(null!==i){let o=i.role;if(typeof o>"u"||"cancel"===i.data||"backdrop"===o)return;t.ant_measure_type=i.data,t.ant_height=Number(o)}}),yield _.present()})()}static{this.\u0275fac=function(_){return new(_||a)(e.rXU(c.W3),e.rXU(k.y8),e.rXU(E.Z),e.rXU(F.f),e.rXU(k.OD))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-modal-stake"]],decls:60,vars:45,consts:[["color","darkblue"],["slot","end",3,"click"],["slot","icon-only","name","close"],["position","floating"],["aria-label","","type","text",3,"ngModel","ngModelChange"],["value","1",3,"label","ngModel","okText","cancelText","ngModelChange"],["value","1"],["value","2"],["value","3"],[4,"ngIf"],["position","stacked"],["aria-label","","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","Type text","row","3",3,"ngModel","ngModelChange"],[1,"ion-no-border"],["expand","full","color","medium",3,"click"],["expand","full","color","success",3,"click"],[3,"label","ngModel","okText","cancelText","ngModelChange","ionChange"],["value","utm"],["value","llh"],[3,"label","ngModel","okText","cancelText","ngModelChange"],["aria-label","","type","text","inputmode","numeric",3,"ngModel","ngModelChange"],[1,"ml-1"],[1,"f_size-14"],["aria-label","","placeholder","MM","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","SS.SS","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","-DD","type","text","inputmode","numeric",3,"ngModel","ngModelChange"],["aria-label","","placeholder","-DD","type","number",3,"ngModel","ngModelChange"],["aria-label","","type","text","placeholder","47",3,"ngModel","ngModelChange"],[1,"ps-2"],["aria-label","","type","text","placeholder","Point",3,"ngModel","ngModelChange","change"],["slot","end",1,"mv_check",3,"name","color"],[1,"ps-2","mt-2"],["src","assets/diagram_offset.svg","width","100%","height","140px"],["aria-label","","type","text","inputmode","numeric","placeholder","0",3,"ngModel","ngModelChange"],["aria-label","","type","number","placeholder","0",3,"ngModel","ngModelChange"],["aria-label","","placeholder","DD\xb0","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","MM'","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder",'SS"',"type","number",3,"ngModel","ngModelChange"],["src","assets/diagram_azimuth.svg","width","100%","height","140px"],["aria-label","","checked","false","color","primary","slot","start",3,"ngModel","ngModelChange"],["id","ant_bttn","slot","end",3,"click"]],template:function(_,i){1&_&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",1),e.bIt("click",function(){return i.cancel_modal()}),e.nrm(6,"ion-icon",2),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",3),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-input",4),e.bIt("ngModelChange",function(r){return i.p_name=r}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-select",5),e.bIt("ngModelChange",function(r){return i.stake_mode=r}),e.nI1(16,"translate"),e.nI1(17,"translate"),e.nI1(18,"translate"),e.j41(19,"ion-select-option",6),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.j41(22,"ion-select-option",7),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"ion-select-option",8),e.EFF(26),e.nI1(27,"translate"),e.k0s()()(),e.DNE(28,z,12,12,"section",9),e.j41(29,"ion-item")(30,"ion-label",10),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"ion-input",11),e.bIt("ngModelChange",function(r){return i.height=r}),e.k0s()(),e.j41(34,"ion-item")(35,"ion-label",10),e.EFF(36),e.nI1(37,"translate"),e.k0s(),e.j41(38,"ion-textarea",12),e.bIt("ngModelChange",function(r){return i.note=r}),e.k0s()(),e.DNE(39,w,33,22,"section",9),e.DNE(40,Q,33,17,"section",9),e.j41(41,"ion-row")(42,"ion-col"),e.DNE(43,q,5,4,"ion-item",9),e.k0s()(),e.j41(44,"ion-row"),e.DNE(45,ee,8,4,"ion-col",9),e.k0s()()(),e.j41(46,"ion-footer",13)(47,"ion-toolbar")(48,"ion-grid")(49,"ion-row")(50,"ion-col")(51,"div")(52,"ion-button",14),e.bIt("click",function(){return i.cancel_modal()}),e.EFF(53),e.nI1(54,"translate"),e.k0s()()(),e.j41(55,"ion-col")(56,"div")(57,"ion-button",15),e.bIt("click",function(){return i.confirm_modal()}),e.EFF(58),e.nI1(59,"translate"),e.k0s()()()()()()()),2&_&&(e.R7$(3),e.JRh(e.bMT(4,21,"STAKES")),e.R7$(8),e.JRh(e.bMT(12,23,"POINT_NAME")),e.R7$(2),e.Y8G("ngModel",i.p_name),e.R7$(2),e.FS9("label",e.bMT(16,25,"STAKE_MODE")),e.FS9("okText",e.bMT(17,27,"OK")),e.FS9("cancelText",e.bMT(18,29,"CANCEL")),e.Y8G("ngModel",i.stake_mode),e.R7$(5),e.JRh(e.bMT(21,31,"ST_LOCATION")),e.R7$(3),e.JRh(e.bMT(24,33,"ST_2")),e.R7$(3),e.JRh(e.bMT(27,35,"ST_AZ")),e.R7$(2),e.Y8G("ngIf","1"==i.stake_mode),e.R7$(3),e.JRh(e.bMT(32,37,"MSL")),e.R7$(2),e.Y8G("ngModel",i.height),e.R7$(3),e.JRh(e.bMT(37,39,"NOTES")),e.R7$(2),e.Y8G("ngModel",i.note),e.R7$(1),e.Y8G("ngIf","2"==i.stake_mode),e.R7$(1),e.Y8G("ngIf","3"==i.stake_mode),e.R7$(3),e.Y8G("ngIf","1"==i.stake_mode&&i.connected),e.R7$(2),e.Y8G("ngIf","1"==i.stake_mode&&i.connected),e.R7$(8),e.JRh(e.bMT(54,41,"CANCEL")),e.R7$(5),e.JRh(e.bMT(59,43,"CONFIRM")))},dependencies:[D.bT,C.BC,C.vS,c.Jm,c.QW,c.HW,c.eY,c.hU,c.W9,c.M0,c.lO,c.eU,c.iq,c.$w,c.uz,c.he,c.nf,c.ln,c.Nm,c.Ip,c.nc,c.BC,c.ai,c.hB,c.su,c.Je,c.Gw,N.D9],styles:[".f_size-12[_ngcontent-%COMP%]{font-size:12px}.f_size-14[_ngcontent-%COMP%]{font-size:14px}"]})}}return a})()}}]);