"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8062],{8848:(b,v,r)=>{r.d(v,{N:()=>f});var l=r(467),t=r(6996),o=r(8974),n=r(9664),_=r(9417);let f=(()=>{class m{constructor(u,c){this.modalController=u,this.translate=c,this.use_internal_ntrip=!0,c.setDefaultLang("en")}ngOnInit(){}cancel_modal(){var u=this;return(0,l.A)(function*(){yield u.modalController.dismiss("cancel")})()}confirm_modal(){var u=this;return(0,l.A)(function*(){yield u.modalController.dismiss("update",`${u.use_internal_ntrip}`)})()}static{this.\u0275fac=function(c){return new(c||m)(t.rXU(o.W3),t.rXU(n.c$))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-modal-base-ntrip"]],decls:27,vars:14,consts:[["color","darkblue"],["slot","end",3,"click"],["slot","icon-only","name","close"],["aria-label","","checked","false","color","primary","slot","start",3,"ngModel","ngModelChange"],[3,"translucent"],["expand","full","color","medium",3,"click"],["expand","full","color","success",3,"click"]],template:function(c,g){1&c&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-buttons",1),t.bIt("click",function(){return g.cancel_modal()}),t.nrm(6,"ion-icon",2),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-checkbox",3),t.bIt("ngModelChange",function(a){return g.use_internal_ntrip=a}),t.k0s(),t.j41(11,"ion-label"),t.EFF(12),t.nI1(13,"translate"),t.k0s()()()(),t.j41(14,"ion-footer",4)(15,"ion-grid")(16,"ion-row")(17,"ion-col")(18,"div")(19,"ion-button",5),t.bIt("click",function(){return g.cancel_modal()}),t.EFF(20),t.nI1(21,"translate"),t.k0s()()(),t.j41(22,"ion-col")(23,"div")(24,"ion-button",6),t.bIt("click",function(){return g.confirm_modal()}),t.EFF(25),t.nI1(26,"translate"),t.k0s()()()()()()),2&c&&(t.R7$(3),t.JRh(t.bMT(4,6,"LB_BASE_NTRIP")),t.R7$(7),t.Y8G("ngModel",g.use_internal_ntrip),t.R7$(2),t.JRh(t.bMT(13,8,"LB_USE_INTERNAL_NTRIP")),t.R7$(2),t.Y8G("translucent",!0),t.R7$(6),t.JRh(t.bMT(21,10,"CANCEL")),t.R7$(5),t.JRh(t.bMT(26,12,"CONFIRM")))},dependencies:[_.BC,_.vS,o.Jm,o.QW,o.eY,o.hU,o.W9,o.M0,o.lO,o.eU,o.iq,o.uz,o.he,o.nf,o.ln,o.BC,o.ai,o.hB,n.D9]})}}return m})()},7014:(b,v,r)=>{r.d(v,{F:()=>u});var l=r(467),t=r(6996),o=r(8974),n=r(9664),_=r(9884),f=r(177),m=r(9417);function p(c,g){if(1&c){const e=t.RV6();t.j41(0,"ion-item")(1,"ion-label",10),t.EFF(2,"Duration (minutes)"),t.k0s(),t.j41(3,"ion-input",11),t.bIt("ngModelChange",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.timeout_min=i)}),t.k0s()()}if(2&c){const e=t.XpG();t.R7$(3),t.Y8G("ngModel",e.timeout_min)}}let u=(()=>{class c{constructor(e,a,i){this.modalController=e,this.translate=a,this.dataService=i,this.label_file_name="file name",this.file_name="raw",this.log_in_receiver=!0,this.timeout_min=40,this.rinex_supported=!1,a.setDefaultLang("en")}ngOnInit(){this.timeout_min=this.dataService.config.base.timeout_m,this.rinex_supported=this.dataService.isRINEXSupported}cancel_modal(){var e=this;return(0,l.A)(function*(){yield e.modalController.dismiss("cancel")})()}confirm_modal(){var e=this;return(0,l.A)(function*(){let a={filename:e.file_name,log_in_receiver:e.log_in_receiver,timeout_m:e.timeout_min};yield e.modalController.dismiss("update",a)})()}static{this.\u0275fac=function(a){return new(a||c)(t.rXU(o.W3),t.rXU(n.c$),t.rXU(_.f))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-modal-static"]],decls:33,vars:19,consts:[["color","darkblue"],["slot","end",3,"click"],["slot","icon-only","name","close"],["position","floating"],["aria-label","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],["aria-label","","checked","false","color","primary","slot","start",3,"ngModel","ngModelChange"],[3,"translucent"],["expand","full","color","medium",3,"click"],["expand","full","color","success",3,"click"],["position","stacked"],["aria-label","","placeholder","40","type","number",3,"ngModel","ngModelChange"]],template:function(a,i){1&a&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-buttons",1),t.bIt("click",function(){return i.cancel_modal()}),t.nrm(6,"ion-icon",2),t.k0s()()(),t.j41(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",3),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"ion-input",4),t.bIt("ngModelChange",function(d){return i.file_name=d}),t.k0s()(),t.DNE(14,p,4,1,"ion-item",5),t.j41(15,"ion-item")(16,"ion-checkbox",6),t.bIt("ngModelChange",function(d){return i.log_in_receiver=d}),t.k0s(),t.j41(17,"ion-label"),t.EFF(18),t.nI1(19,"translate"),t.k0s()()()(),t.j41(20,"ion-footer",7)(21,"ion-grid")(22,"ion-row")(23,"ion-col")(24,"div")(25,"ion-button",8),t.bIt("click",function(){return i.cancel_modal()}),t.EFF(26),t.nI1(27,"translate"),t.k0s()()(),t.j41(28,"ion-col")(29,"div")(30,"ion-button",9),t.bIt("click",function(){return i.confirm_modal()}),t.EFF(31),t.nI1(32,"translate"),t.k0s()()()()()()),2&a&&(t.R7$(3),t.JRh(t.bMT(4,9,"LB_STATIC")),t.R7$(8),t.JRh(t.bMT(12,11,"FILE_NAME")),t.R7$(2),t.Y8G("ngModel",i.file_name),t.R7$(1),t.Y8G("ngIf",i.rinex_supported),t.R7$(2),t.Y8G("ngModel",i.log_in_receiver),t.R7$(2),t.JRh(t.bMT(19,13,"LB_LOG_IN_RECEIVER")),t.R7$(2),t.Y8G("translucent",!0),t.R7$(6),t.JRh(t.bMT(27,15,"CANCEL")),t.R7$(5),t.JRh(t.bMT(32,17,"CONFIRM")))},dependencies:[f.bT,m.BC,m.vS,o.Jm,o.QW,o.eY,o.hU,o.W9,o.M0,o.lO,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.ln,o.BC,o.ai,o.hB,o.su,o.Gw,n.D9]})}}return c})()},8062:(b,v,r)=>{r.d(v,{T:()=>u});var l=r(467),t=r(7014),o=r(8848),n=r(6996),_=r(8974),f=r(7157),m=r(9884),p=r(9664);let u=(()=>{class c{constructor(e,a,i,s,d){this.modalController=e,this.nav=a,this.alertController=i,this.dataService=s,this.translate=d,this.label_static="Static",this.label_file_name="file name",this.label_ok="OK",this.label_cancel="CANCEL",this.label_alert="Alert",this.msg_please_enter_file="Please enter static file name",this.msg_require_project="Please add or select Project first!",d.setDefaultLang("en")}ngOnInit(){this.translationLanguage()}close_modal(){var e=this;return(0,l.A)(function*(){yield e.modalController.dismiss("close")})()}start_rover_ntrip(){var e=this;return(0,l.A)(function*(){console.log("Start Rover NTRIP Mode"),e.dataService.connected?"Project"!=e.dataService.project_name?(yield e.dataService.NetNTRIPDisconnect().then(a=>{},a=>{}),yield e.dataService.NetNTRIPServerClose().then(a=>{},a=>{}),e.dataService.config.geoid_model=e.dataService.geoid_model,e.dataService.config.utm_format=e.dataService.utm_format_text,e.dataService.config.use_as_base=!1,e.dataService.config.rover.mode="single",e.dataService.config.rover.correction_input_type="ntripcli",e.dataService.config.nvrate="1",e.dataService.config.rover.ntrip_client_format="rtcm3",e.dataService.connected&&e.dataService.bluetoothMode?(e.dataService.blueRequesSaveGeneralConfig(),setTimeout(()=>{e.dataService.blueRequesSaveRoverConfig()},5e3),setTimeout(()=>{e.dataService.NetNTRIPConnect()},1e4)):e.dataService.wifi_connected&&(e.dataService.saveGeneralConfig(),setTimeout(()=>{e.dataService.saveRoverConfig()},5e3),setTimeout(()=>{e.dataService.NetNTRIPConnect()},1e4)),e.nav.navigateBack("tabs/tab4"),e.close_modal()):e.alertDialog(e.msg_require_project):console.log("Not connected yet")})()}start_rover_radio(){var e=this;return(0,l.A)(function*(){console.log("Start Rover Radio Mode"),e.dataService.connected?"Project"!=e.dataService.project_name?(yield e.dataService.NetNTRIPDisconnect().then(a=>{},a=>{}),yield e.dataService.NetNTRIPServerClose().then(a=>{},a=>{}),e.dataService.config.use_as_base=!1,e.dataService.config.rover.mode="kinematic-survey",e.dataService.config.rover.correction_input_type=e.dataService.isPRB2||e.dataService.isPRB3?"radio":"serial",e.dataService.config.rover.input_correction_tty="ttyUSB0",e.dataService.config.nvrate="1",e.dataService.config.rover.ntrip_client_format="rtcm3",e.dataService.connected&&e.dataService.bluetoothMode?(e.dataService.blueRequesSaveGeneralConfig(),setTimeout(()=>{e.dataService.blueRequesSaveRoverConfig()},5e3)):(e.dataService.saveGeneralConfig(),setTimeout(()=>{e.dataService.saveRoverConfig()},5e3)),e.nav.navigateBack("tabs/tab4"),e.close_modal()):e.alertDialog(e.msg_require_project):console.log("Not connected yet")})()}start_base_radio(){var e=this;return(0,l.A)(function*(){console.log("Start Base Radio Mode"),e.dataService.connected?(yield e.dataService.NetNTRIPDisconnect().then(a=>{},a=>{}),yield e.dataService.NetNTRIPServerClose().then(a=>{},a=>{}),e.dataService.config.use_as_base=!0,e.dataService.config.nvrate="1",e.dataService.config.base.base_type=e.dataService.isPRB2||e.dataService.isPRB3?"radio":"serial",e.dataService.config.base.output_tty="ttyUSB0",e.dataService.config.base.base_format="rtcm3",e.dataService.config.base.output_file_log=!1,e.dataService.connected&&e.dataService.bluetoothMode?(e.dataService.blueRequesSaveGeneralConfig(),setTimeout(()=>{e.dataService.blueRequesSaveBaseConfig()},5e3)):e.dataService.wifi_connected&&e.dataService.saveBaseConfig(),e.dataService.log_enabled=!1,e.nav.navigateBack("tabs/tab4"),e.close_modal()):console.log("Not connected yet")})()}start_base_ntrip(e){var a=this;return(0,l.A)(function*(){console.log("Start Base NTRIP Mode, use internal NTRIP client",e),a.dataService.connected?(yield a.dataService.NetNTRIPDisconnect().then(i=>{},i=>{}),yield a.dataService.NetNTRIPServerClose().then(i=>{},i=>{}),a.dataService.config.use_as_base=!0,a.dataService.config.nvrate="1",a.dataService.config.base.base_type=e?"ntripsvr":"off",a.dataService.config.base.base_format="rtcm3",a.dataService.config.base.output_file_log=!1,a.dataService.connected&&a.dataService.bluetoothMode?(a.dataService.blueRequesSaveGeneralConfig(),setTimeout(()=>{a.dataService.blueRequesSaveBaseConfig()},5e3),e||setTimeout(()=>{a.dataService.NetNTRIPServerConnect().then(i=>{},i=>{console.log(i)})},5e3)):a.dataService.wifi_connected&&(a.dataService.saveBaseConfig(),e||setTimeout(()=>{a.dataService.NetNTRIPServerConnect().then(i=>{},i=>{console.log(i)})},5e3)),a.dataService.log_enabled=!1,a.nav.navigateBack("tabs/tab4"),a.close_modal()):console.log("Not connected yet")})()}start_static(e){var a=this;return(0,l.A)(function*(){console.log("Start Static Mode"),a.dataService.connected?(yield a.dataService.NetNTRIPDisconnect().then(i=>{},i=>{}),yield a.dataService.NetNTRIPServerClose().then(i=>{},i=>{}),a.dataService.config.use_as_base=!0,a.dataService.config.nvrate="1",a.dataService.config.base.base_type="off",a.dataService.config.base.base_format="ubx",a.dataService.config.base.output_file_log=e,a.dataService.config.base.output_file_name=a.dataService.log_ubx_filename,a.dataService.log_bytes_received=0,a.dataService.log_bytes_receiving=0,a.dataService.connected&&a.dataService.bluetoothMode?(a.dataService.blueRequesSaveGeneralConfig(),setTimeout(()=>{a.dataService.blueRequesSaveBaseConfig()},5e3)):a.dataService.wifi_connected&&a.dataService.saveBaseConfig(),a.dataService.log_enabled=!e,a.nav.navigateBack("tabs/tab4"),a.close_modal()):console.log("Not connected yet")})()}promptLogName(){var e=this;return(0,l.A)(function*(){if(!e.dataService.connected)return void console.log("Not connected yet");const i=yield e.modalController.create({component:t.F,cssClass:"modal-css-70",componentProps:{}});return i.onDidDismiss().then(s=>{if(null!==s){let d=s.role;if(typeof d>"u"||"cancel"===s.data||"backdrop"===d)return;e.dataService.config.base.timeout_m=d.timeout_m,e.dataService.log_ubx_filename=d.filename,e.start_static(d.log_in_receiver),e.close_modal()}}),yield i.present()})()}promptBaseNTRIP(){var e=this;return(0,l.A)(function*(){if(!e.dataService.connected)return void console.log("Not connected yet");const a=yield e.modalController.create({component:o.N,cssClass:"modal-css-50",componentProps:{}});return a.onDidDismiss().then(i=>{if(null!==i){let s=i.role;if(typeof s>"u"||"cancel"===i.data||"backdrop"===s)return;let d=JSON.parse(s);e.start_base_ntrip(d),e.close_modal()}}),yield a.present()})()}translationLanguage(){this.translate.get("LB_STATIC").subscribe(e=>{this.label_static=e}),this.translate.get("FILE_NAME").subscribe(e=>{this.label_file_name=e}),this.translate.get("MSG_PLEASE_ENTER_FILE_NAME").subscribe(e=>{this.msg_please_enter_file=e}),this.translate.get("OK").subscribe(e=>{this.label_ok=e}),this.translate.get("CANCEL").subscribe(e=>{this.label_cancel=e}),this.translate.get("LB_REQUIRE_PROJECT").subscribe(e=>{this.msg_require_project=e}),this.translate.get("ALERT").subscribe(e=>{this.label_alert=e})}alertDialog(e){var a=this;return(0,l.A)(function*(){yield(yield a.alertController.create({header:`${a.label_alert}`,message:e,buttons:[{text:`${a.label_ok}`,handler:()=>{}}]})).present()})()}static{this.\u0275fac=function(a){return new(a||c)(n.rXU(_.W3),n.rXU(f.q9),n.rXU(_.hG),n.rXU(m.f),n.rXU(p.c$))}}static{this.\u0275cmp=n.VBU({type:c,selectors:[["app-modal-type"]],decls:34,vars:19,consts:[[1,"custom-header"],["color","darkblue",1,"ion-align-items-center","custom-toolbar"],["slot","end",3,"click"],["slot","icon-only","name","close",1,"me-2"],[3,"fullscreen"],[1,"mt-4","grid-container"],[1,"grid-item",3,"click"],["src","../assets/images/rover1.png",2,"background-size","cover"],[1,"p-1","m-0"],["src","../assets/images/radio1.png"],["src","../assets/images/base3.png"],["src","../assets/images/base4.png"],["src","../assets/images/base1.png"]],template:function(a,i){1&a&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-buttons",2),n.bIt("click",function(){return i.close_modal()}),n.nrm(6,"ion-icon",3),n.k0s()()(),n.j41(7,"ion-content",4)(8,"div",5)(9,"ion-card",6),n.bIt("click",function(){return i.start_rover_ntrip()}),n.nrm(10,"img",7),n.j41(11,"ion-card-content",8),n.EFF(12),n.nI1(13,"translate"),n.k0s()(),n.j41(14,"ion-card",6),n.bIt("click",function(){return i.start_rover_radio()}),n.nrm(15,"img",9),n.j41(16,"ion-card-content",8),n.EFF(17),n.nI1(18,"translate"),n.k0s()(),n.j41(19,"ion-card",6),n.bIt("click",function(){return i.start_base_radio()}),n.nrm(20,"img",10),n.j41(21,"ion-card-content",8),n.EFF(22),n.nI1(23,"translate"),n.k0s()(),n.j41(24,"ion-card",6),n.bIt("click",function(){return i.promptLogName()}),n.nrm(25,"img",11),n.j41(26,"ion-card-content",8),n.EFF(27),n.nI1(28,"translate"),n.k0s()(),n.j41(29,"ion-card",6),n.bIt("click",function(){return i.promptBaseNTRIP()}),n.nrm(30,"img",12),n.j41(31,"ion-card-content",8),n.EFF(32),n.nI1(33,"translate"),n.k0s()()()()),2&a&&(n.R7$(3),n.JRh(n.bMT(4,7,"LB_SELECT_WORKING_MODE")),n.R7$(4),n.Y8G("fullscreen",!0),n.R7$(5),n.SpI(" ",n.bMT(13,9,"LB_ROVER_NTRIP")," "),n.R7$(5),n.SpI(" ",n.bMT(18,11,"LB_ROVER_RADIO")," "),n.R7$(5),n.SpI(" ",n.bMT(23,13,"LB_BASE_RADIO")," "),n.R7$(5),n.SpI(" ",n.bMT(28,15,"LB_STATIC")," "),n.R7$(5),n.SpI(" ",n.bMT(33,17,"LB_BASE_NTRIP")," "))},dependencies:[_.QW,_.b_,_.I9,_.W9,_.eU,_.iq,_.BC,_.ai,p.D9],styles:['@charset "UTF-8";.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto;margin-top:10px}.grid-item[_ngcontent-%COMP%]{background-color:#fffc;border:1px solid rgba(0,0,0,.8);font-size:30px;text-align:center}.custom-header[_ngcontent-%COMP%]{position:relative;max-height:52px;height:52px}.custom-toolbar[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:100%;display:flex;align-items:center;justify-content:space-between}']})}}return c})()}}]);