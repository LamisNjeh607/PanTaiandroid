"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2453],{2453:(F,d,l)=>{l.r(d),l.d(d,{HttpLoaderFactory:()=>h,SettingGeneralPageModule:()=>v});var g=l(177),r=l(9417),c=l(1470),a=l(8974),e=l(6996),f=l(9884),m=l(1626),C=l(7157),_=l(9664);function u(s,S){if(1&s){const t=e.RV6();e.j41(0,"section")(1,"ion-item")(2,"ion-select",19),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.model_geoid=n)}),e.nI1(3,"translate"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.j41(6,"ion-select-option",31),e.EFF(7,"EGM95-5"),e.k0s(),e.j41(8,"ion-select-option",32),e.EFF(9,"TGM2017-1"),e.k0s()()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.FS9("label",e.bMT(3,4,"GEOID_MODEL")),e.FS9("okText",e.bMT(4,6,"OK")),e.FS9("cancelText",e.bMT(5,8,"CANCEL")),e.Y8G("ngModel",t.model_geoid)}}function b(s,S){if(1&s){const t=e.RV6();e.j41(0,"section")(1,"ion-list")(2,"ion-item")(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.nrm(6,"ion-icon",7),e.j41(7,"ion-select",8),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_mode=n)})("ionChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.modeChange(n))}),e.nI1(8,"translate"),e.nI1(9,"translate"),e.j41(10,"ion-select-option",9),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-select-option",10),e.EFF(14),e.nI1(15,"translate"),e.k0s()()()(),e.j41(16,"ion-list")(17,"ion-item"),e.nrm(18,"ion-icon",11),e.j41(19,"ion-label"),e.EFF(20,"GPS"),e.k0s(),e.j41(21,"ion-toggle",12),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_gps=n)}),e.k0s()(),e.j41(22,"ion-item"),e.nrm(23,"ion-icon",11),e.j41(24,"ion-label"),e.EFF(25,"GLONASS"),e.k0s(),e.j41(26,"ion-toggle",13),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_glonass=n)}),e.k0s()(),e.j41(27,"ion-item"),e.nrm(28,"ion-icon",11),e.j41(29,"ion-label"),e.EFF(30,"BEIDOU"),e.k0s(),e.j41(31,"ion-toggle",14),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_beidou=n)}),e.k0s()(),e.j41(32,"ion-item"),e.nrm(33,"ion-icon",11),e.j41(34,"ion-label"),e.EFF(35,"GALILEO"),e.k0s(),e.j41(36,"ion-toggle",15),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_galileo=n)}),e.k0s()(),e.j41(37,"ion-item"),e.nrm(38,"ion-icon",11),e.j41(39,"ion-label"),e.EFF(40,"QZSS"),e.k0s(),e.j41(41,"ion-toggle",16),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_qzss=n)}),e.k0s()(),e.j41(42,"ion-item"),e.nrm(43,"ion-icon",11),e.j41(44,"ion-label"),e.EFF(45,"SBAS"),e.k0s(),e.j41(46,"ion-toggle",17),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_sbas=n)}),e.k0s()(),e.j41(47,"ion-item"),e.nrm(48,"ion-icon",11),e.j41(49,"ion-label"),e.EFF(50,"NAVIC"),e.k0s(),e.j41(51,"ion-toggle",18),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_navic=n)}),e.k0s()()(),e.j41(52,"ion-list")(53,"ion-item")(54,"ion-select",19),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_rate=n)}),e.nI1(55,"translate"),e.nI1(56,"translate"),e.nI1(57,"translate"),e.j41(58,"ion-select-option",20),e.EFF(59,"1 Hz"),e.k0s(),e.j41(60,"ion-select-option",21),e.EFF(61,"5 Hz"),e.k0s(),e.j41(62,"ion-select-option",22),e.EFF(63,"10 Hz"),e.k0s(),e.j41(64,"ion-select-option",23),e.EFF(65,"20 Hz"),e.k0s()()()(),e.j41(66,"ion-list")(67,"ion-label",24),e.EFF(68),e.nI1(69,"translate"),e.k0s(),e.j41(70,"ion-item")(71,"ion-label",25),e.EFF(72),e.nI1(73,"translate"),e.k0s(),e.j41(74,"ion-input",26),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_observation_time=n)}),e.k0s()(),e.j41(75,"ion-item")(76,"ion-label",25),e.EFF(77),e.nI1(78,"translate"),e.k0s(),e.j41(79,"ion-input",27),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_limit_rms_h=n)}),e.k0s()(),e.j41(80,"ion-item")(81,"ion-label",25),e.EFF(82),e.nI1(83,"translate"),e.k0s(),e.j41(84,"ion-input",27),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_limit_rms_v=n)}),e.k0s()(),e.j41(85,"ion-item")(86,"ion-label",25),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.j41(89,"ion-input",28),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_limit_pdop=n)}),e.k0s()(),e.j41(90,"ion-item")(91,"ion-label"),e.EFF(92),e.nI1(93,"translate"),e.k0s(),e.j41(94,"ion-toggle",29),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_solution_fix_only=n)}),e.k0s()(),e.DNE(95,u,10,10,"section",5),e.j41(96,"ion-item")(97,"ion-select",19),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.model_latlong_format=n)}),e.nI1(98,"translate"),e.nI1(99,"translate"),e.nI1(100,"translate"),e.j41(101,"ion-select-option",20),e.EFF(102,"DD.DDDD"),e.k0s(),e.j41(103,"ion-select-option",30),e.EFF(104,"DD\xb0MM'SS.SSSS\""),e.k0s()()()()()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,34,"OPERATION_MODE")),e.R7$(2),e.FS9("name",t.icon_mode),e.R7$(1),e.FS9("okText",e.bMT(8,36,"OK")),e.FS9("cancelText",e.bMT(9,38,"CANCEL")),e.Y8G("ngModel",t.model_mode),e.R7$(4),e.JRh(e.bMT(12,40,"ROVER")),e.R7$(3),e.JRh(e.bMT(15,42,"BASE")),e.R7$(7),e.Y8G("ngModel",t.model_gps),e.R7$(5),e.Y8G("ngModel",t.model_glonass),e.R7$(5),e.Y8G("ngModel",t.model_beidou),e.R7$(5),e.Y8G("ngModel",t.model_galileo),e.R7$(5),e.Y8G("ngModel",t.model_qzss),e.R7$(5),e.Y8G("ngModel",t.model_sbas),e.R7$(5),e.Y8G("ngModel",t.model_navic),e.R7$(3),e.FS9("label",e.bMT(55,44,"NAV_RATE")),e.FS9("okText",e.bMT(56,46,"OK")),e.FS9("cancelText",e.bMT(57,48,"CANCEL")),e.Y8G("ngModel",t.model_rate),e.R7$(14),e.SpI("",e.bMT(69,50,"LAND_SURVEY_PARAMETERS")," "),e.R7$(4),e.JRh(e.bMT(73,52,"OBSERVATION_TIME")),e.R7$(2),e.Y8G("ngModel",t.model_observation_time),e.R7$(3),e.JRh(e.bMT(78,54,"LIMIT_RMS_H")),e.R7$(2),e.Y8G("ngModel",t.model_limit_rms_h),e.R7$(3),e.JRh(e.bMT(83,56,"LIMIT_RMS_V")),e.R7$(2),e.Y8G("ngModel",t.model_limit_rms_v),e.R7$(3),e.JRh(e.bMT(88,58,"LIMIT_PDOP")),e.R7$(2),e.Y8G("ngModel",t.model_limit_pdop),e.R7$(3),e.JRh(e.bMT(93,60,"MARK_ONLY_FIX")),e.R7$(2),e.Y8G("ngModel",t.model_solution_fix_only),e.R7$(1),e.Y8G("ngIf",t.pro_version),e.R7$(2),e.FS9("label",e.bMT(98,62,"LATLNG_FORMAT")),e.FS9("okText",e.bMT(99,64,"OK")),e.FS9("cancelText",e.bMT(100,66,"CANCEL")),e.Y8G("ngModel",t.model_latlong_format)}}let p=(()=>{class s{constructor(t,i,n){this.dataService=t,this.http=i,this.nav=n,this.model_observation_time=5,this.model_limit_rms_h=.1,this.model_limit_rms_v=.1,this.model_limit_pdop=4,this.model_solution_fix_only=!1,this.model_tgm2017=!0,this.model_geoid="default",this.model_transform_dx=0,this.model_transform_dy=0,this.model_transform_dz=0,this.model_transform_rx=0,this.model_transform_ry=0,this.model_transform_rz=0,this.model_transform_scale=0,this.model_transform_ellipsoid="WGS84",this.model_transform_major_axis=0,this.model_transform_flattening=0,this.connected=!1,this.pro_version=!1}ngOnInit(){if(console.log("General Tab"),this.dataConfig=this.dataService.config,this.connected=this.dataService.connected,("variscite"===this.dataService.info.platform||this.dataService.isPRB2||this.dataService.isPRB3)&&(this.pro_version=!0),!this.connected)return void this.nav.navigateBack("tabs/tab1");this.buildPage();let t=setInterval(()=>{if(!this.dataService.connected)return console.log("Timeout"),clearTimeout(t),void this.nav.navigateBack("tabs/tab1")},5e3)}buildPage(){0==this.dataConfig.use_as_base?(this.model_mode="rover",this.icon_mode="car",this.text_mode="Rover"):1==this.dataConfig.use_as_base&&(this.model_mode="base",this.icon_mode="radio",this.text_mode="Base"),this.model_auto_start=this.dataConfig.auto_start,console.log(this.dataConfig.gnss),this.model_gps=this.dataConfig.gnss.gnss[0].enable,this.model_sbas=this.dataConfig.gnss.gnss[1].enable,this.model_galileo=this.dataConfig.gnss.gnss[2].enable,this.model_beidou=this.dataConfig.gnss.gnss[3].enable,this.model_qzss=this.dataConfig.gnss.gnss[5].enable,this.model_glonass=this.dataConfig.gnss.gnss[6].enable;try{this.model_navic=this.dataConfig.gnss.gnss[7].enable}catch{this.model_navic=!1,console.log(this.model_navic)}this.model_rate=this.dataConfig.nvrate,this.model_rtk=this.dataConfig.rtk_engine,this.model_observation_time=this.dataConfig.observation_time,this.model_limit_rms_h=this.dataConfig.limit_rms_h,this.model_limit_rms_v=this.dataConfig.limit_rms_v,this.model_limit_pdop=this.dataConfig.limit_pdop,this.model_solution_fix_only=this.dataConfig.solution_fix_only,this.model_geoid=typeof this.dataConfig.geoid_model<"u"?this.dataConfig.geoid_model.toLowerCase():typeof this.dataConfig.tgm2017<"u"?this.dataConfig.tgm2017?"tgm2017-1":"egm96-5":"default",this.model_latlong_format=this.dataConfig.latlon_format,this.model_utm_format=this.dataConfig.utm_format,this.model_transform_dx=this.dataConfig.transform_dx,this.model_transform_dy=this.dataConfig.transform_dy,this.model_transform_dz=this.dataConfig.transform_dz,this.model_transform_rx=this.dataConfig.transform_rx,this.model_transform_ry=this.dataConfig.transform_ry,this.model_transform_rz=this.dataConfig.transform_rz,this.model_transform_scale=this.dataConfig.transform_scale,this.model_transform_ellipsoid=this.dataConfig.transform_ellipsoid,this.model_transform_major_axis=this.dataConfig.transform_major_axis,this.model_transform_flattening=this.dataConfig.transform_flattening}modeChange(t){"base"==this.model_mode?(this.icon_mode="radio",this.text_mode="Base"):(this.icon_mode="car",this.text_mode="Rover")}datumChange(t){let i=this.dataService.findProjection(this.model_utm_format);if(0==i.length)return;let n=i[0][1];this.model_transform_dx=n.dx,this.model_transform_dy=n.dy,this.model_transform_dz=n.dz,this.model_transform_rx=n.rx,this.model_transform_ry=n.ry,this.model_transform_rz=n.rz,this.model_transform_scale=n.scale,this.model_transform_ellipsoid=n.ellipsoid,this.model_transform_major_axis=n.a,this.model_transform_flattening=n.inv_f}SaveConfig(t){console.log("Save Config"),this.save_conf_ui(),this.nav.navigateBack("tabs/tab5"),this.dataService.connected&&this.dataService.bluetoothMode?this.dataService.blueRequesSaveGeneralConfig():(this.dataService.configSaveChange(),this.dataService.saveGeneralConfig())}save_conf_ui(){delete this.dataConfig.limit_rms_n,delete this.dataConfig.limit_rms_e,delete this.dataConfig.limit_rms_u,this.dataConfig.use_as_base="rover"!=this.model_mode,this.dataConfig.auto_start=this.model_auto_start,this.dataConfig.gnss.gnss[0].enable=this.model_gps,this.dataConfig.gnss.gnss[1].enable=this.model_sbas,this.dataConfig.gnss.gnss[2].enable=this.model_galileo,this.dataConfig.gnss.gnss[3].enable=this.model_beidou,this.dataConfig.gnss.gnss[5].enable=this.model_qzss,this.dataConfig.gnss.gnss[6].enable=this.model_glonass;try{this.dataConfig.gnss.gnss[7].enable=this.model_navic}catch{this.dataConfig.gnss.gnss.push({gnssId:7,minTrkCh:8,maxTrkCh:16,enable:!0})}this.dataConfig.nvrate=this.model_rate,this.dataConfig.rtk_engine=this.model_rtk,this.dataConfig.observation_time=Number(this.model_observation_time)<=0?1:Number(this.model_observation_time),this.dataConfig.limit_rms_h=Number(this.model_limit_rms_h),this.dataConfig.limit_rms_v=Number(this.model_limit_rms_v),this.dataConfig.limit_pdop=Number(this.model_limit_pdop),this.dataConfig.solution_fix_only=this.model_solution_fix_only,this.dataConfig.tgm2017=this.model_tgm2017,this.dataConfig.geoid_model=this.model_geoid,this.dataConfig.latlon_format=this.model_latlong_format,this.dataConfig.utm_format=this.model_utm_format,this.dataConfig.transform_dx=this.model_transform_dx,this.dataConfig.transform_dy=this.model_transform_dy,this.dataConfig.transform_dz=this.model_transform_dz,this.dataConfig.transform_rx=this.model_transform_rx,this.dataConfig.transform_ry=this.model_transform_ry,this.dataConfig.transform_rz=this.model_transform_rz,this.dataConfig.transform_scale=this.model_transform_scale,this.dataConfig.transform_ellipsoid=this.model_transform_ellipsoid,this.dataConfig.transform_major_axis=this.model_transform_major_axis,this.dataConfig.transform_flattening=this.model_transform_flattening,this.dataService.updateProjectionFromConfig()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(f.f),e.rXU(m.Qq),e.rXU(C.q9))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-setting-general"]],decls:15,vars:7,consts:[["color","darkblue"],["slot","start"],["defaultHref","/tabs/tab5"],["slot","end"],[3,"click"],[4,"ngIf"],[1,"ion-no-border"],["slot","start",3,"name"],["label","","slot","end",3,"ngModel","okText","cancelText","ngModelChange","ionChange"],["value","rover"],["value","base"],["slot","start","name","logo-rss"],["aria-label","GPS","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","GLONASS","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","BEIDOU","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","GALILEO","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","QZSS","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","SBAS","slot","end","color","primary",3,"ngModel","ngModelChange"],["aria-label","NAVIC","slot","end","color","primary",3,"ngModel","ngModelChange"],[3,"label","ngModel","okText","cancelText","ngModelChange"],["value","1"],["value","5"],["value","10"],["value","20"],[1,"ps-3"],["position","stacked"],["aria-label","","placeholder","5","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","0.1","type","number",3,"ngModel","ngModelChange"],["aria-label","","placeholder","4","type","number",3,"ngModel","ngModelChange"],["aria-label","Fix","color","primary","slot","end",3,"ngModel","ngModelChange"],["value","2"],["value","egm96-5"],["value","tgm2017-1"]],template:function(i,n){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"ion-buttons",3)(8,"ion-button",4),e.bIt("click",function(G){return n.SaveConfig(G)}),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()(),e.j41(11,"ion-content"),e.DNE(12,b,105,68,"section",5),e.k0s(),e.j41(13,"ion-footer",6),e.nrm(14,"ion-toolbar"),e.k0s()),2&i&&(e.R7$(5),e.JRh(e.bMT(6,3,"GENERAL")),e.R7$(4),e.SpI(" ",e.bMT(10,5,"APPLY")," "),e.R7$(3),e.Y8G("ngIf",n.connected))},dependencies:[g.bT,r.BC,r.vS,a.Jm,a.QW,a.W9,a.M0,a.eU,a.iq,a.$w,a.uz,a.he,a.nf,a.Nm,a.Ip,a.BC,a.BY,a.ai,a.hB,a.su,a.Je,a.el,_.D9]})}}return s})();var M=l(5635);function h(s){return new M.s(s,"./assets/i18n/",".json")}const j=[{path:"",component:p}];let v=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[g.MD,r.YN,a.bv,c.iI.forChild(j),_.h.forChild({loader:{provide:_.Wr,useFactory:h,deps:[m.Qq]}})]})}}return s})()}}]);